CREATE TABLE ROLE (
   ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
   NAME VARCHAR(255),
   PRIMARY KEY (ID)
);

ALTER TABLE ROLE ADD CONSTRAINT ROLE_NAME UNIQUE(NAME);

CREATE TABLE USER (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
  PASSWORD VARCHAR(255),
  AVATAR VARCHAR(255),
  USER_NAME VARCHAR(255),
  ACCOUNT_EXPIRED BOOLEAN,
  ACCOUNT_LOCKED BOOLEAN,
  CREDENTIALS_EXPIRED BOOLEAN,
  ENABLED BOOLEAN,
  PRIMARY KEY (ID)
);

ALTER TABLE USER ADD CONSTRAINT USER_USER_NAME UNIQUE(USER_NAME);

CREATE TABLE USERS_ROLES (
   USER_ID BIGINT NOT NULL,
   ROLE_ID BIGINT NOT NULL,
   PRIMARY KEY (USER_ID, ROLE_ID)
);

ALTER TABLE USERS_ROLES ADD CONSTRAINT USERS_ROLE_ROLE
   FOREIGN KEY (ROLE_ID) REFERENCES ROLE;

ALTER TABLE USERS_ROLES ADD CONSTRAINT USERS_ROLE_USER
   FOREIGN KEY (USER_ID) REFERENCES USER;

